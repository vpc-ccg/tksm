outpath:
    /groups/hachgrp/projects/dev-tksm/analysis/paper

TS_experiments:
    TS_1:
        sample : 'MCF7-sgnex'
        pipeline:
            - Xpr:
                ''
            - Spc:
                '--molecule-count 5000000'
            - plA:
                '--normal=15,7.5'
            - Trc:
                ''
            - Seq:
                '--skip-qual-compute'
    TS_1_chr21:
        sample : 'MCF7-sgnex_chr21'
        pipeline:
            - Xpr:
                ''
            - Spc:
                '--molecule-count 100000'
            - plA:
                '--normal=15,7.5'
            - Trc:
                ''
            - Seq:
                '--skip-qual-compute'

NS_experiments:
    NS_1:
        sample : 'MCF7-sgnex'
        simulation_params:
            '-n 5000000 --seed 42'
    NS_1_chr21:
        sample : 'MCF7-sgnex_chr21'
        simulation_params:
            '-n 100000 --seed 42'

plots:
    # - {
    #     rules: [
    #         raw_lengths,
    #         mapped_raw_lengths,
    #         mapped_lengths,
    #         # substition,
    #         # polyA,
    #         # tpm_plot,
    #         # tpm_plot_liqa,
    #         # tpm_plot_paf,
    #     ],
    #     data: [
    #         MCF7-sgnex_chr21,
    #         # TS_1_chr21,
    #         # NS_1_chr21,
    #         # TS_TRUNC_child_chr21,
    #         TS_TRUNC_chr21,
    #     ],
    # }
    - {
        rules: [
            raw_lengths,
            mapped_raw_lengths,
            mapped_lengths,
            # substition,
            # polyA,
            tpm_plot,
            # tpm_plot_liqa,
            tpm_plot_paf,
            tpm_plot_nanosim,
        ],
        data: [
            MCF7-sgnex,
            # TS_1_chr21,
            NS_1,
            # TS_TRUNC_child_chr21,
            TS_1,
        ],
    }
    
exec:
    tksm:
        build/bin/tksm
    tNS_analyze:
        simulator.py

refs:
    Homo_sapiens:
        cDNA:
            data/refs/Homo_sapiens.GRCh38.cdna.all.fa
        DNA:
            data/refs/Homo_sapiens.GRCh38.dna.primary_assembly.fa
        GTF:
            data/refs/Homo_sapiens.GRCh38.108.chr_patch_hapl_scaff.gtf
    Homo_sapiens_chr21:
        cDNA:
            data/refs/Homo_sapiens.GRCh38.cdna.chr21.fa
        DNA:
            data/refs/Homo_sapiens.GRCh38.dna.primary_assembly.chr21.fa
        GTF:
            data/refs/Homo_sapiens.GRCh38.108.chr21.gtf
    10x_bc:
        data/refs/3M-february-2018.txt.gz

samples:
    'MCF7-sgnex':
        fastq:
            - data/samples/MCF7-sgnex.fastq.gz
        ref:
            Homo_sapiens
    'MCF7-sgnex_chr21':
        fastq:
            - data/samples/MCF7-sgnex_subsample.fastq.gz
        ref:
            Homo_sapiens_chr21
    'N1':
        fastq:
            - data/samples/N1.fastq
        ref:
            Homo_sapiens
    'N1_chr21':
        fastq:
            - data/samples/N1_subsample.fastq.gz
        ref:
            Homo_sapiens_chr21
